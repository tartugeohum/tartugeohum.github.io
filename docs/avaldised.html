<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Praktikum 7 Avaldised ja päringud | HVEE.00.045 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes</title>
  <meta name="description" content="Praktikum 7 Avaldised ja päringud | HVEE.00.045 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Praktikum 7 Avaldised ja päringud | HVEE.00.045 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Praktikum 7 Avaldised ja päringud | HVEE.00.045 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes" />
  
  
  

<meta name="author" content="Maarja-Liisa Pilvik" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="georefereerimine.html"/>
<link rel="next" href="kirjandus.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<link href="libs/leaflet-measure-2.1.7/leaflet-measure.css" rel="stylesheet" />
<script src="libs/leaflet-measure-2.1.7/leaflet-measure.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Sissejuhatus</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#kursuse-korraldusest"><i class="fa fa-check"></i><b>1.1</b> Kursuse korraldusest</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#mis-on-geoinfosüsteemid"><i class="fa fa-check"></i><b>1.2</b> Mis on geoinfosüsteemid?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#geoinfosüsteemide-ajaloost"><i class="fa fa-check"></i><b>1.3</b> Geoinfosüsteemide ajaloost</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#ruumiandmed-ja-gis-humanitaarteadustes"><i class="fa fa-check"></i><b>1.4</b> Ruumiandmed ja GIS humanitaarteadustes</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#lugude-jutustamine"><i class="fa fa-check"></i><b>1.4.1</b> Lugude jutustamine</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#arheoloogia"><i class="fa fa-check"></i><b>1.4.2</b> Arheoloogia</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#keeleteadus"><i class="fa fa-check"></i><b>1.4.3</b> Keeleteadus</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#keele-sotsiaalteadus"><i class="fa fa-check"></i><b>1.4.4</b> Keele-/sotsiaalteadus</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#veel-näiteid"><i class="fa fa-check"></i><b>1.4.5</b> Veel näiteid</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#ruumiobjektid-ja-ruumiandmed"><i class="fa fa-check"></i><b>1.5</b> Ruumiobjektid ja ruumiandmed</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#vektorandmed"><i class="fa fa-check"></i><b>1.5.1</b> Vektorandmed</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#rasterandmed"><i class="fa fa-check"></i><b>1.5.2</b> Rasterandmed</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#vektor-vs.-raster"><i class="fa fa-check"></i><b>1.5.3</b> Vektor vs. raster</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="kaardid.html"><a href="kaardid.html"><i class="fa fa-check"></i><b>2</b> Kaardid, koordinaatsüsteemid ja projektsioonid</a>
<ul>
<li class="chapter" data-level="2.1" data-path="kaardid.html"><a href="kaardid.html#kaart"><i class="fa fa-check"></i><b>2.1</b> Kaart</a></li>
<li class="chapter" data-level="2.2" data-path="kaardid.html"><a href="kaardid.html#kaardi-elemendid"><i class="fa fa-check"></i><b>2.2</b> Kaardi elemendid</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="kaardid.html"><a href="kaardid.html#mootkava"><i class="fa fa-check"></i><b>2.2.1</b> Mõõtkava</a></li>
<li class="chapter" data-level="2.2.2" data-path="kaardid.html"><a href="kaardid.html#projektsioon"><i class="fa fa-check"></i><b>2.2.2</b> Koordinaatsüsteemid ja projektsioonid</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="kaardid.html"><a href="kaardid.html#kaartide-liigitus"><i class="fa fa-check"></i><b>2.3</b> Kaartide liigitus</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="kaardid.html"><a href="kaardid.html#digitaalkaardid"><i class="fa fa-check"></i><b>2.3.1</b> Digitaalkaardid</a></li>
<li class="chapter" data-level="2.3.2" data-path="kaardid.html"><a href="kaardid.html#viguriga-kaardid"><i class="fa fa-check"></i><b>2.3.2</b> Viguriga kaardid</a></li>
<li class="chapter" data-level="2.3.3" data-path="kaardid.html"><a href="kaardid.html#ülesanne"><i class="fa fa-check"></i><b>2.3.3</b> Ülesanne</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="kaardid.html"><a href="kaardid.html#kaartide-koostamine-ja-kujundamine-veebis"><i class="fa fa-check"></i><b>2.4</b> Kaartide koostamine ja kujundamine veebis</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="kaardid.html"><a href="kaardid.html#arcgis-online"><i class="fa fa-check"></i><b>2.4.1</b> ArcGIS Online</a></li>
<li class="chapter" data-level="2.4.2" data-path="kaardid.html"><a href="kaardid.html#mapbox-studio"><i class="fa fa-check"></i><b>2.4.2</b> Mapbox Studio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="storymaps.html"><a href="storymaps.html"><i class="fa fa-check"></i><b>3</b> Story maps</a>
<ul>
<li class="chapter" data-level="3.1" data-path="storymaps.html"><a href="storymaps.html#story-maps"><i class="fa fa-check"></i><b>3.1</b> Story maps</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="storymaps.html"><a href="storymaps.html#storymapjs"><i class="fa fa-check"></i><b>3.1.1</b> StoryMapJS</a></li>
<li class="chapter" data-level="3.1.2" data-path="storymaps.html"><a href="storymaps.html#arcgis-storymaps"><i class="fa fa-check"></i><b>3.1.2</b> ArcGIS StoryMaps</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="storymaps.html"><a href="storymaps.html#ülesanne-tänane-kuupäev-story-mapis"><i class="fa fa-check"></i><b>3.2</b> Ülesanne: tänane kuupäev <em>story map</em>’is</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="qgis.html"><a href="qgis.html"><i class="fa fa-check"></i><b>4</b> Sissejuhatus QGISi</a>
<ul>
<li class="chapter" data-level="4.1" data-path="qgis.html"><a href="qgis.html#installimine-ja-seadistamine"><i class="fa fa-check"></i><b>4.1</b> Installimine ja seadistamine</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="qgis.html"><a href="qgis.html#kasutajaliidese-keel"><i class="fa fa-check"></i><b>4.1.1</b> Kasutajaliidese keel</a></li>
<li class="chapter" data-level="4.1.2" data-path="qgis.html"><a href="qgis.html#vaikimisi-koordinaatide-referentssüsteem"><i class="fa fa-check"></i><b>4.1.2</b> Vaikimisi koordinaatide referentssüsteem</a></li>
<li class="chapter" data-level="4.1.3" data-path="qgis.html"><a href="qgis.html#paneelid-ja-tööriistad"><i class="fa fa-check"></i><b>4.1.3</b> Paneelid ja tööriistad</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="qgis.html"><a href="qgis.html#aluskaardid"><i class="fa fa-check"></i><b>4.2</b> Aluskaardid</a></li>
<li class="chapter" data-level="4.3" data-path="qgis.html"><a href="qgis.html#andmete-avamine"><i class="fa fa-check"></i><b>4.3</b> Andmete avamine</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="qgis.html"><a href="qgis.html#rasterandmed-1"><i class="fa fa-check"></i><b>4.3.1</b> Rasterandmed</a></li>
<li class="chapter" data-level="4.3.2" data-path="qgis.html"><a href="qgis.html#vektorandmed-1"><i class="fa fa-check"></i><b>4.3.2</b> Vektorandmed</a></li>
<li class="chapter" data-level="4.3.3" data-path="qgis.html"><a href="qgis.html#andmete-sisselugemine-csv-failist"><i class="fa fa-check"></i><b>4.3.3</b> Andmete sisselugemine CSV-failist</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="qgis.html"><a href="qgis.html#andmete-visualiseerimine"><i class="fa fa-check"></i><b>4.4</b> Andmete visualiseerimine</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="qgis.html"><a href="qgis.html#harjutus-1"><i class="fa fa-check"></i><b>4.4.1</b> Harjutus 1</a></li>
<li class="chapter" data-level="4.4.2" data-path="qgis.html"><a href="qgis.html#sildid"><i class="fa fa-check"></i><b>4.4.2</b> Sildid</a></li>
<li class="chapter" data-level="4.4.3" data-path="qgis.html"><a href="qgis.html#harjutus-2"><i class="fa fa-check"></i><b>4.4.3</b> Harjutus 2</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="qgis.html"><a href="qgis.html#kaartide-eksportimine"><i class="fa fa-check"></i><b>4.5</b> Kaartide eksportimine</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="avaandmed.html"><a href="avaandmed.html"><i class="fa fa-check"></i><b>5</b> Avaandmed ja repositooriumid. Andmekihtide ühendamine</a>
<ul>
<li class="chapter" data-level="5.1" data-path="avaandmed.html"><a href="avaandmed.html#avaandmed-1"><i class="fa fa-check"></i><b>5.1</b> Avaandmed</a></li>
<li class="chapter" data-level="5.2" data-path="avaandmed.html"><a href="avaandmed.html#eesti-ruumiandmed"><i class="fa fa-check"></i><b>5.2</b> Eesti ruumiandmed</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="avaandmed.html"><a href="avaandmed.html#maa-ameti-geoportaal"><i class="fa fa-check"></i><b>5.2.1</b> Maa-ameti geoportaal</a></li>
<li class="chapter" data-level="5.2.2" data-path="avaandmed.html"><a href="avaandmed.html#statistikaamet"><i class="fa fa-check"></i><b>5.2.2</b> Statistikaamet</a></li>
<li class="chapter" data-level="5.2.3" data-path="avaandmed.html"><a href="avaandmed.html#muud"><i class="fa fa-check"></i><b>5.2.3</b> Muud</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="avaandmed.html"><a href="avaandmed.html#muudriigid"><i class="fa fa-check"></i><b>5.3</b> Muude riikide ruumiandmed</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="avaandmed.html"><a href="avaandmed.html#harjutus"><i class="fa fa-check"></i><b>5.3.1</b> Harjutus</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="avaandmed.html"><a href="avaandmed.html#andmestike-ühendamine"><i class="fa fa-check"></i><b>5.4</b> Andmestike ühendamine</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="avaandmed.html"><a href="avaandmed.html#ühendamine-ühise-tunnuse-järgi"><i class="fa fa-check"></i><b>5.4.1</b> Ühendamine ühise tunnuse järgi</a></li>
<li class="chapter" data-level="5.4.2" data-path="avaandmed.html"><a href="avaandmed.html#geokodeerimine"><i class="fa fa-check"></i><b>5.4.2</b> Geokodeerimine</a></li>
<li class="chapter" data-level="5.4.3" data-path="avaandmed.html"><a href="avaandmed.html#ühendamine-ruumiinfo-järgi"><i class="fa fa-check"></i><b>5.4.3</b> Ühendamine ruumiinfo järgi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="georefereerimine.html"><a href="georefereerimine.html"><i class="fa fa-check"></i><b>6</b> Georefereerimine</a>
<ul>
<li class="chapter" data-level="6.1" data-path="georefereerimine.html"><a href="georefereerimine.html#kaartide-otsimine-ja-allalaadimine"><i class="fa fa-check"></i><b>6.1</b> Kaartide otsimine ja allalaadimine</a></li>
<li class="chapter" data-level="6.2" data-path="georefereerimine.html"><a href="georefereerimine.html#harjutus-1-vana-tartu-kaardi-georefereerimine"><i class="fa fa-check"></i><b>6.2</b> Harjutus 1: vana Tartu kaardi georefereerimine</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="georefereerimine.html"><a href="georefereerimine.html#avame-kaardi-pildifaili"><i class="fa fa-check"></i><b>6.2.1</b> Avame kaardi pildifaili</a></li>
<li class="chapter" data-level="6.2.2" data-path="georefereerimine.html"><a href="georefereerimine.html#lisame-aluskaardi"><i class="fa fa-check"></i><b>6.2.2</b> Lisame aluskaardi</a></li>
<li class="chapter" data-level="6.2.3" data-path="georefereerimine.html"><a href="georefereerimine.html#georefereerime-kaardi"><i class="fa fa-check"></i><b>6.2.3</b> Georefereerime kaardi</a></li>
<li class="chapter" data-level="6.2.4" data-path="georefereerimine.html"><a href="georefereerimine.html#lõikame-kaardist-välja-ainult-vanalinna-osa"><i class="fa fa-check"></i><b>6.2.4</b> Lõikame kaardist välja ainult vanalinna osa</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="georefereerimine.html"><a href="georefereerimine.html#harjutus-2-ajalooline-maakasutus-jägala-mõisa-külades"><i class="fa fa-check"></i><b>6.3</b> Harjutus 2: ajalooline maakasutus Jägala mõisa külades</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="georefereerimine.html"><a href="georefereerimine.html#kaardi-georefereerimine"><i class="fa fa-check"></i><b>6.3.1</b> Kaardi georefereerimine</a></li>
<li class="chapter" data-level="6.3.2" data-path="georefereerimine.html"><a href="georefereerimine.html#digiteerimine"><i class="fa fa-check"></i><b>6.3.2</b> Digiteerimine</a></li>
<li class="chapter" data-level="6.3.3" data-path="georefereerimine.html"><a href="georefereerimine.html#pindalade-arvutamine"><i class="fa fa-check"></i><b>6.3.3</b> Pindalade arvutamine</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="georefereerimine.html"><a href="georefereerimine.html#harjutus-3-käsikirjalise-kaardi-georefereerimine"><i class="fa fa-check"></i><b>6.4</b> Harjutus 3: käsikirjalise kaardi georefereerimine</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="avaldised.html"><a href="avaldised.html"><i class="fa fa-check"></i><b>7</b> Avaldised ja päringud</a>
<ul>
<li class="chapter" data-level="7.1" data-path="avaldised.html"><a href="avaldised.html#andmed"><i class="fa fa-check"></i><b>7.1</b> Andmed</a></li>
<li class="chapter" data-level="7.2" data-path="avaldised.html"><a href="avaldised.html#avaldised-1"><i class="fa fa-check"></i><b>7.2</b> Avaldised</a></li>
<li class="chapter" data-level="7.3" data-path="avaldised.html"><a href="avaldised.html#harjutused-avaldistega"><i class="fa fa-check"></i><b>7.3</b> Harjutused avaldistega</a>
<ul>
<li class="chapter" data-level="" data-path="avaldised.html"><a href="avaldised.html#harjutus-1-operaatorid-objektide-valimiseks"><i class="fa fa-check"></i>Harjutus 1: operaatorid objektide valimiseks</a></li>
<li class="chapter" data-level="" data-path="avaldised.html"><a href="avaldised.html#harjutus-2-tingimuslaused-uute-atribuutidetunnuste-loomiseks"><i class="fa fa-check"></i>Harjutus 2: tingimuslaused uute atribuutide/tunnuste loomiseks</a></li>
<li class="chapter" data-level="" data-path="avaldised.html"><a href="avaldised.html#harjutus-3-tekstiavaldised-sümbolite-kujundamiseks-1"><i class="fa fa-check"></i>Harjutus 3: tekstiavaldised sümbolite kujundamiseks (1)</a></li>
<li class="chapter" data-level="" data-path="avaldised.html"><a href="avaldised.html#harjutus-4-tekstiavaldised-sümbolite-kujundamiseks-2"><i class="fa fa-check"></i>Harjutus 4: tekstiavaldised sümbolite kujundamiseks (2)</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="avaldised.html"><a href="avaldised.html#päringud"><i class="fa fa-check"></i><b>7.4</b> Päringud</a></li>
<li class="chapter" data-level="7.5" data-path="avaldised.html"><a href="avaldised.html#harjutus-päringutega"><i class="fa fa-check"></i><b>7.5</b> Harjutus päringutega</a></li>
<li class="chapter" data-level="7.6" data-path="avaldised.html"><a href="avaldised.html#ülesanded"><i class="fa fa-check"></i><b>7.6</b> Ülesanded</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="avaldised.html"><a href="avaldised.html#kontrollikihelkondi"><i class="fa fa-check"></i><b>7.6.1</b> Ülesanne 1: “ei ole”/“pole” suhtelised sagedused murdekorpuses</a></li>
<li class="chapter" data-level="7.6.2" data-path="avaldised.html"><a href="avaldised.html#ülesanne-2-ei-olepole-murdeatlase-levikuandmed"><i class="fa fa-check"></i><b>7.6.2</b> Ülesanne 2: “ei ole”/“pole” murdeatlase levikuandmed</a></li>
<li class="chapter" data-level="7.6.3" data-path="avaldised.html"><a href="avaldised.html#ülesanne-3-ei-olepole-selged-eelistused"><i class="fa fa-check"></i><b>7.6.3</b> Ülesanne 3: “ei ole”/“pole” selged eelistused</a></li>
<li class="chapter" data-level="7.6.4" data-path="avaldised.html"><a href="avaldised.html#ülesanne-4-tekstiatribuutide-muutmine"><i class="fa fa-check"></i><b>7.6.4</b> Ülesanne 4: tekstiatribuutide muutmine</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="kirjandus.html"><a href="kirjandus.html"><i class="fa fa-check"></i>Kirjandus</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HVEE.00.045 Geoinfosüsteemide rakendusvõimalused humanitaarteadustes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="avaldised" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Praktikum 7</span> Avaldised ja päringud<a href="avaldised.html#avaldised" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="andmed" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Andmed<a href="avaldised.html#andmed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Impordime tänaseks praktikumiks QGISi</p>
<ul>
<li>kihelkondade <em>shapefile</em>’i (EKI, Peeter Päll; erineb pisut Maa-ameti ruumiandmete lehel olevast andmestikust; on kasutusel nt <a href="https://murre.ut.ee">eesti murrete korpuses</a>),<br />
</li>
<li><em>shapefile</em>’i, mis sisaldab andmeid <em>ei ole</em> ja <em>pole</em> eituskonstruktsioonide <strong>leviku</strong> kohta eesti murretes Andrus Saareste 1955. aasta <a href="https://github.com/MPilvik/RuRaKe/tree/master/Saareste-vaike-murdeatlas">“Väikese Eesti murdeatlase”</a> põhjal,<br />
</li>
<li>CSV-faili, mis sisaldab andmeid <em>ei ole</em> ja <em>pole</em> suhtelisest <strong>sagedusest</strong> <a href="http://www.murre.ut.ee/">Eesti murrete korpuses</a>. NB! Kodeering on UTF-8, välju eraldab semikoolon, esimesel real on tulbanimed ning koordinaatide infot failis ei ole. <a href="https://murre.ut.ee">Eesti murrete korpus</a> sisaldab transkribeeritud murdeintervjuude tekste 10 traditsiooniliselt murdealalt. Tekstid on suuremas jaos salvestatud 1960.-1970. aastatel. Korpusest on võimalik teha päringuid nii sõnajärjendite kui ka märksõnade põhjal, et näha näiteks, milline on erinevate keelendite sagedusjaotus eri piirkondade murdetekstides.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions7"></span>
<img src="imgs/10_layers.png" alt="Lisatud kihid" width="80%" />
<p class="caption">
Joonis 7.1: Lisatud kihid
</p>
</div>
<p>Kui soovid võrrelda, kuidas EKI kihelkondade kaart klapib Maa-ameti kihelkondade kaardiga, võid taustaks panna veel WMS-i või WFS-i kaudu Maa-ameti ajaloolise haldusjaotuse kaardi: <code>https://teenus.maaamet.ee/ows/wms-ajalooline-haldus?</code>.</p>
<p><em>Ei ole</em> ja <em>pole</em> tunduvad eesti keeles paljudes kontekstides ekvivalentsed, samatähenduslikud ja sama funktsiooniga variandid. Sellel varieerumisel on aga ka oma murdetaust: mõned murded eelistavad analüütilist <em>ei ole</em> konstruktsiooni, teised sünteetilist <em>pole</em> konstruktsiooni, ehkki tegemist ei ole selgelt kategooriliste eelistustega (“kasutan ainult üht ja mitte kunagi teist”).</p>
</div>
<div id="avaldised-1" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Avaldised<a href="avaldised.html#avaldised-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Avaldised (<em>expressions</em>) on tehted ja vormelid, mille abil hõlpsalt muuta atribuutide väärtusi, luua uusi (virtuaalseid) atribuute või kihte, andmetest alamhulki välja filtreerida, teha statistikat jne. Avaldiste abil saab andmeid QGISis mitmekülgsemalt analüüsida ning visualiseerida.</p>
<p>Avaldisi saab QGISis kasutada mitmes kohas, näiteks</p>
<ul>
<li>objektide valimiseks <strong><code>Select Features by Expression</code></strong> tööriista abil <img src="imgs/10_selectfeatures.png" />,<br />
</li>
<li>objektide valimiseks atribuuttabeli alumisest vasakust nurgast <strong><code>Advanced Filter (Expression)</code></strong> <img src="imgs/10_advancedfilter.png" />,<br />
</li>
<li>atribuutide muutmiseks ja lisamiseks <strong><code>Field calculator</code></strong>’is <img src="imgs/10_fieldcalculator.png" />,<br />
</li>
<li>päringute tegemiseks <code>Query builder</code>’is (<strong><code>Layer Properties → Source → Query Builder</code></strong>) <img src="imgs/10_querybuilder.png" />,<br />
</li>
<li>päringute tegemiseks <code>Database Manager</code>’is (<strong><code>Database → DB Manager</code></strong>) <img src="imgs/10_dbmanager.png" />,<br />
</li>
<li>sümbolite, siltide või paigutuse parameetrite muutmisel (<strong><code>Symbology</code></strong>)<br />
</li>
<li>jne.</li>
</ul>
<p>Avaldisi saab eeldefineeritud funktsioonide abil koostada niisiis mitmeks erinevaks otstarbeks, vaata ülevaadet <a href="https://docs.qgis.org/3.34/en/docs/user_manual/expressions/expression.html">QGISi juhendist</a>. Sealjuures saab üht ja sama asja teha sageli erineval moel.</p>
<p>Oleme juba lihtsate avaldistega kokku puutunud, kui arvutasime eelmisel korral digiteeritud polügoonide pindala (<a href="georefereerimine.html#fig:koilapindala">6.13</a>): <code>round($area / 10000, 2)</code>.</p>
<p>Vaatame sel korral harjutuste ja ülesannete toel lähemalt <strong>operaatoreid</strong> (<strong><code>Operators</code></strong>), <strong>matemaatilisi funktsioone</strong> (<strong><code>Math</code></strong>), <strong>tingimuslauseid</strong> (<strong><code>Conditionals</code></strong>) ning teksti muutmise võimalusi (<strong><code>String</code></strong>).</p>
<p>Operaatorid ja funktsioonid, millega tänases praktikumis kokku puutume, on</p>
<ul>
<li><strong><code>-</code></strong>: lahuta ühest väärtusest teine;<br />
</li>
<li><strong><code>&gt;</code></strong>: leia, kas üks väärtus on suurem kui teine (tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>&gt;=</code></strong>: leia, kas üks väärtus on suurem kui teine või sellega võrdne (tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>IS</code></strong>: mingi (atribuudi) väärtus peab olema mingi kindel väärtus (sama, mis <code>=</code>, tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>IS NOT</code></strong>: mingi (atribuudi) väärtus ei tohi olla mingi kindel väärtus (sama, mis <code>!=</code>, tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>ILIKE</code></strong>: kas mingi (atribuudi) väärtus vastab mingile kindlale mustrile (tõstutundetu)? (tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>OR</code></strong>: operaator VÕI (tagastab <code>1</code> (TRUE) või <code>0</code> (FALSE));<br />
</li>
<li><strong><code>if(tingimus, kuikehtib, kuieikehti)</code></strong>: kui kehtib mingi tingimus, määratakse mingi väärtus, kui ei kehti, siis mingi muu väärtus (sama, mis <code>CASE ... WHEN ... THEN ... ELSE ... END</code>);<br />
</li>
<li><strong><code>length(tekst)</code></strong>: leia mingi teksti/sõne pikkus tähemärkides;<br />
</li>
<li><strong><code>replace(tekst, midaasendada, millegaasendada)</code></strong>: asenda tekst või selle mingi osa muu tekstiga;<br />
</li>
<li><strong><code>regexp_replace(tekst, midaasendada, millegaasendada)</code></strong>: asenda tekst või selle mingi osa muu tekstiga, kasutades regulaarvaldisi.</li>
</ul>
</div>
<div id="harjutused-avaldistega" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Harjutused avaldistega<a href="avaldised.html#harjutused-avaldistega" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="harjutus-1-operaatorid-objektide-valimiseks" class="section level3 unnumbered hasAnchor">
<h3>Harjutus 1: operaatorid objektide valimiseks<a href="avaldised.html#harjutus-1-operaatorid-objektide-valimiseks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Kasutame <strong>valiku tööriista</strong> (<strong><code>Select Features by Expression</code></strong>), et teha aktiivseks kõik need kihelkondade polügoonid, millel on midagi kirjutatud tulpa <code>Problem</code> (nt selleks, et hakata parandustega tegelema).</p>
<ul>
<li>Kõikide atribuutide/tulpade nimed ja tüübid saab kätte jaotisest <strong><code>Fields and Values</code></strong>. Nupp <code>All Unique</code> näitab atribuudi kõiki eri väärtuseid, nupp <code>10 Samples</code> sellest kuni kümmet esimest eri väärtust. Topeltklikk atribuudi nimel liigutab jutumärkide vahel oleva atribuudi vasakul asuvasse avaldise kasti. Avaldiste kastis <strong>viidataksegi topeltjutumärkidega atribuuttabeli mingile tunnusele (= tulbanimele), ühekordsete jutumärkidega mingitele tekstilistele väärtustele</strong> (nt kui küsime tulbast <code>Parish_id</code> Pühalepa kihelkonna rida, siis peaksime kirjutama avaldise <strong><code>"Parish_id"</code></strong> <code>=</code> <strong><code>'Phl'</code></strong> või <code>"Parish_id" IS 'Phl'</code>).<br />
</li>
<li>Jaotuse <strong><code>Operators</code></strong> alt leiame terve hulga sümboleid, mille abil teha nt arvutustehteid, võrdlustehteid või tekstitöötlust, sh vajamineva operaatori <strong><code>IS NOT</code></strong>.<br />
</li>
<li>Tahame leida niisiis atribuuttabelist neid ridu, kus tulp <code>Problem</code> ei ole tühi: <strong><code>"Problem" IS NOT NULL</code></strong>.<br />
</li>
<li>Vajutame nupul <code>Select Features</code>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex1"></span>
<img src="imgs/10_harjutus1.png" alt="Probleemsed kihelkonnad" width="70%" />
<p class="caption">
Joonis 7.2: Probleemsed kihelkonnad
</p>
</div>
</div>
<div id="harjutus-2-tingimuslaused-uute-atribuutidetunnuste-loomiseks" class="section level3 unnumbered hasAnchor">
<h3>Harjutus 2: tingimuslaused uute atribuutide/tunnuste loomiseks<a href="avaldised.html#harjutus-2-tingimuslaused-uute-atribuutidetunnuste-loomiseks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Kasutame <strong>väljakalkulaatori tööriista</strong> (<strong><code>Field Calculator</code></strong>), et lisada <em>ei ole</em>/<em>pole</em> atlase levikuandmetesse <strong>virtuaalne (st ajutine)</strong> tekstiatribuut nimega <strong><code>saj19</code></strong>, kus oleks väärtus <em>jah</em> ridadel, kus keelejuhi sünniaeg on väiksem kui aasta 1900, <em>ei</em>, kui keelejuhi sünniaeg on hilisem, ja <em>ei tea</em>, kui keelejuhi sünniaega pole märgitud. Virtuaalse atribuudi lisamiseks valime <code>Field Calculator</code>’is <code>Create a new field → Create virtual field</code>, atribuudi nimeks paneme <code>saj19</code>, atribuudi tüübiks valime <code>Text (string)</code>.</p>
<ul>
<li>Siin läheb vaja <strong>tingimuslauseid</strong> jaotises <strong><code>Conditionals</code></strong>. Kasutame siin funktsiooni <strong><code>if</code></strong>, mille järel sulgude sees komadega eraldatult tuleb anda esmalt tingimus (“Kas tulbas <code>SaKJSynd</code> olev arv on väiksem kui 1900?”), seejärel väärtus juhul, kui tingimus vastab tõele, ning lõpuks väärtus juhul, kui tingimus ei vasta tõele: <strong><code>if("SaKJSynd" &lt; 1900, 'jah', 'ei')</code></strong>.<br />
</li>
<li>Meil on aga atribuuttabelis ka sellised read, kus keelejuhi sünniaeg võrdub 0-ga või on <em>NULL</em>, sest see pole teada. Meil oleks oluline märkida ära, et nende puhul me tegelikult sünniaega hinnata ei oska: <strong><code>if("SaKJSynd" IS 0 OR "SaKJSynd" IS NULL, 'ei tea', if("SaKJSynd" &lt; 1900, 'jah', 'ei'))</code></strong>:
<ul>
<li>Kui tulbas <code>SaKJSynd</code> on väärtus 0 VÕI polegi midagi (<em>NULL</em>),<br />
</li>
<li>märgi tulpa <code>saj19</code> väärtus <em>ei tea</em>,<br />
</li>
<li>vastasel juhul
<ul>
<li>kui tulbas <code>SaKJSynd</code> on väärtus, mis on väiksem kui 1900,
<ul>
<li>märgi tulpa <code>saj19</code> väärtus <em>jah</em>,<br />
</li>
</ul></li>
<li>vastasel juhul väärtus <em>ei</em>.</li>
</ul></li>
</ul></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex2"></span>
<img src="imgs/10_harjutus2.png" alt="Uue tulba tekitamine" width="70%" />
<p class="caption">
Joonis 7.3: Uue tulba tekitamine
</p>
</div>
</div>
<div id="harjutus-3-tekstiavaldised-sümbolite-kujundamiseks-1" class="section level3 unnumbered hasAnchor">
<h3>Harjutus 3: tekstiavaldised sümbolite kujundamiseks (1)<a href="avaldised.html#harjutus-3-tekstiavaldised-sümbolite-kujundamiseks-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Värvime</strong> kihelkonnad selle järgi, <strong>kui mitu tähte nende nimes on</strong>, aga nii, et me ei pea atribuuttabelisse selleks eraldi tunnust looma.</p>
<ul>
<li>Valime kihelkondade kihi <strong><code>Symbology</code></strong> jaotise alt <code>Graduated</code> ja <code>Value</code> puhul ühe konkreetse tunnuse nime valiku asemel vajutame lahtri kõrval olevat avaldise sümboliga nuppu <img src="imgs/10_avaldisenupp.png" />.<br />
</li>
<li>Kihelkondade nimed on tulbas <code>Name</code>. Teksti/sõne pikkuse leidmiseks on jaotise <strong><code>String</code></strong> all funktsioon <code>length</code>: <strong><code>length("Name")</code></strong>.<br />
</li>
<li>Lisame ka sildid, et kontrollida, kas värvilegend peab paika.<br />
</li>
<li>Alloleva kaardi saamiseks teeme veel mõned kujunduslikud sammud:
<ul>
<li><code>Symbology → Graduated → Symbol → Simple Fill</code>:
<ul>
<li>muudame polügoonide piirjoonte (<code>Stroke</code>) läbipaistvust 16% peale;<br />
</li>
<li>teeme linnukese <code>Draw effects</code> valiku ette ja vajutame kollasel tähekesel,<br />
</li>
<li>seal omakorda teeme linnukese <code>Drop Shadow</code> ette, valime varju ulatuseks (<code>Offset</code>) 135 kraadi ja 1 mm, udustamise raadiuseks (<code>Blur radius</code>) 2 mm ning <code>Blend mode</code> väärtuseks <code>Normal</code>.<br />
</li>
</ul></li>
<li><code>Symbology → Labels</code>:
<ul>
<li>muudame teksti suurust väiksemaks (<code>Text → Size → 5 points</code>);<br />
</li>
<li>joonistame teksti ümber pooleldi läbipaistva puhverala (<code>Buffer → Draw text buffer → Opacity = 50%</code>);<br />
</li>
<li>muudame siltide paigutuse nurga alla (<code>Placement → General Settings → Mode = Free (Angled)</code>);<br />
</li>
<li>näitame kõiki (ka kattuvaid) silte (<code>Rendering → Overlapping labels → Mode = Allow Overlaps without Penalty</code>, vanemates QGISi versioonides <code>Rendering → Show all labels for this layer (including colliding labels)</code>).</li>
</ul></li>
</ul></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex3"></span>
<img src="imgs/10_harjutus3.png" alt="Kihelkonnad vastavalt nende nimede pikkusele" width="70%" />
<p class="caption">
Joonis 7.4: Kihelkonnad vastavalt nende nimede pikkusele
</p>
</div>
</div>
<div id="harjutus-4-tekstiavaldised-sümbolite-kujundamiseks-2" class="section level3 unnumbered hasAnchor">
<h3>Harjutus 4: tekstiavaldised sümbolite kujundamiseks (2)<a href="avaldised.html#harjutus-4-tekstiavaldised-sümbolite-kujundamiseks-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Toome värvi ja/või sümboliga esile ainult need “ei ole”-“pole” andmestiku punktid, mille asustusüksuse nime alguses või lõpus on <em>Jõe-/-jõe</em> või <em>Järve-/-järve</em>. Teised punktid värvime halliks ja teeme läbipaistvamaks. Need punktid, millel asulanime atribuuttabelis ei ole, jätame jooniselt välja.</p>
<ul>
<li><strong>Asendame</strong> esmalt <em>ő</em>-sümbolid tulbas <code>ANIMI</code> <em>õ</em>-tähtedega:
<ul>
<li>Selleks saame <code>Field Calculator</code>’is <strong>uuendada olemasolevat atribuuti</strong> <code>ANIMI</code> (<strong><code>Update existing field</code></strong>) regulaaravaldise abil (<code>String → replace</code>): <strong><code>replace("ANIMI", 'ő', 'õ')</code></strong>.<br />
</li>
</ul></li>
<li>Valime nüüd punktide kihi <strong><code>Symbology</code></strong> alt <code>Categorized</code> ja <code>Value</code> puhul vajutame jälle avaldise sümboliga nuppu.
<ul>
<li>Saame kasutada näiteks operaatorit <strong><code>ILIKE</code></strong>: <strong><code>"ANIMI" ILIKE '%jõe%' OR "ANIMI" ILIKE '%järve%'</code></strong>.<br />
</li>
<li>Selles avaldises ütleme, et kujunda mingit moodi ainult need punktid, mille ridadel atribuuttabelis on tulbas “ANIMI” järjend <em>Jõe</em> või <em>jõe</em> (<code>ILIKE</code> on tõstutundetu) sõna alguses, lõpus või keskel (sümbol <code>%</code> märgib ükskõik mis sümboleid ükskõik kui palju, sh ka 0 sümbolit), samamoodi <em>järve</em> kohta.<br />
</li>
<li>Märgime sellised objektid näiteks tähekestega ja muud punktid, mis avaldisele ei vasta, helehalliks.<br />
</li>
</ul></li>
<li>Lisame sama avaldist kasutades ka sildid ainult valitud punktidele: <strong><code>if("ANIMI" ILIKE '%jõe%' OR "ANIMI" ILIKE '%järve%', "ANIMI", NULL)</code></strong>.<br />
</li>
<li>Võime lisada alla veel Maa-ameti fotokaartide WMS-teenusest värvilise reljeefvarjutuse (<code>6 vreljeef</code>), et vaadata, kas leitud kohanimed ka päriselt veekogude ääres on.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex4"></span>
<img src="imgs/10_harjutus4.png" alt="Jõe- ja järvenimelised asulanimed" width="70%" />
<p class="caption">
Joonis 7.5: Jõe- ja järvenimelised asulanimed
</p>
</div>
</div>
</div>
<div id="päringud" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Päringud<a href="avaldised.html#päringud" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lisaks eeldefineeritud funktsioonidele saab QGISis kasutada ka <a href="https://www.w3schools.com/sql/">SQL-i päringuid</a>, näiteks:</p>
<ul>
<li><a href="https://www.w3schools.com/sql/sql_select.asp">Ridade ja tulpade valimine</a>
<ul>
<li><strong>SELECT</strong> tulp <strong>FROM</strong> andmestik;
<ul>
<li><em>vali andmestikust ainult üks tulp</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> tulp1, tulp2 <strong>FROM</strong> andmestik;
<ul>
<li><em>vali andmestikust kaks tulpa</em><br />
</li>
</ul></li>
<li><strong>SELECT DISTINCT</strong> tulp <strong>FROM</strong> andmestik;
<ul>
<li><em>vali andmestikust tulba unikaalsed väärtused</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> * <strong>FROM</strong> andmestik;
<ul>
<li><em>vali andmestikust kõik tulbad ja read</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> * <strong>FROM</strong> andmestik <strong>WHERE</strong> tulp = ‘Mingi väärtus’;
<ul>
<li><em>vali andmestikust kõik tulbad ja read, kus tulbas ‘tulp’ on väärtus ‘Mingi väärtus’</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> tulp1, tulp2 <strong>FROM</strong> andmestik <strong>WHERE</strong> tulp1 &gt; 50 <strong>AND</strong> tulp2 <strong>ILIKE</strong> ‘%St%’;
<ul>
<li><em>vali andmestikust tulbad ‘tulp1’ ja ‘tulp2’ ning ainult sellised read, kus tulp1 väärtused on suuremad kui 50 ja kus tulp2s on lahtris kuskil tähejärjend ‘St’</em><br />
</li>
</ul></li>
</ul></li>
<li><a href="https://www.w3schools.com/sql/sql_update.asp">Muutmine</a>
<ul>
<li><strong>UPDATE</strong> andmestik <strong>SET</strong> tulp = ‘Mingi uus väärtus’ <strong>WHERE</strong> tulp = ‘Mingi vana väärtus’;
<ul>
<li><em>uuenda andmestikku nii, et sea tulba ‘tulp’ väärtuseks ‘Mingi uus väärtus’ nendel ridadel, kus tulba ‘tulp’ väärtus on praegu ‘Mingi vana väärtus’</em><br />
</li>
</ul></li>
<li><strong>UPDATE</strong> andmestik <strong>SET</strong> tulp = ‘Mingi uus väärtus’ <strong>WHERE</strong> id = 8;
<ul>
<li><em>uuenda andmestikku nii, et sea tulba ‘tulp’ väärtuseks ‘Mingi uus väärtus’ sellel real, kus id väärtus on 8</em><br />
</li>
</ul></li>
</ul></li>
<li><a href="https://www.w3schools.com/sql/sql_insert.asp">Lisamine</a>
<ul>
<li><strong>INSERT INTO</strong> andmestik (tulp1, tulp2, tulp3, tulp4) <strong>VALUES</strong> (‘tulp1 väärtus’, ‘tulp2 väärtus’, ‘tulp3 väärtus’, ‘tulp4 väärtus’);
<ul>
<li><em>sisesta andmestikku üks rida, kus tulpadesse ‘tulp1’, ‘tulp2’, ‘tulp3’ ja ‘tulp4’ lähevad vastavalt väärtused ‘tulp1 väärtus’, ‘tulp2 väärtus’, ‘tulp3 väärtus’ ja ‘tulp4 väärtus’</em><br />
</li>
</ul></li>
</ul></li>
<li><a href="https://www.w3schools.com/sql/sql_delete.asp">Kustutamine</a>
<ul>
<li><strong>DELETE FROM</strong> andmestik <strong>WHERE</strong> tulp = ‘Mingi väärtus’;
<ul>
<li><em>kustuta andmestikust read, kus tulbas ‘tulp’ on väärtus ‘Mingi väärtus’</em><br />
</li>
</ul></li>
</ul></li>
<li><a href="https://www.w3schools.com/sql/sql_orderby.asp">Järjestamine</a>
<ul>
<li><strong>SELECT</strong> tulp1, tulp2, tulp3 <strong>FROM</strong> andmestik <strong>ORDER BY</strong> tulp1;
<ul>
<li><em>vali andmestikust ainult tulbad ‘tulp1’, ‘tulp2’ ja ‘tulp3’ ning järjesta uus andmestik ‘tulp1’ väärtuste järgi (vaikimisi väiksemast suuremani või A-st Z-ni)</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> tulp1, tulp2, tulp3 <strong>FROM</strong> andmestik <strong>ORDER BY</strong> tulp1, tulp2;
<ul>
<li><em>vali andmestikust ainult tulbad ‘tulp1’, ‘tulp2’ ja ‘tulp3’ ning järjesta uus andmestik ‘tulp1’ ning siis ‘tulp2’ väärtuste järgi</em><br />
</li>
</ul></li>
</ul></li>
<li><a href="https://www.w3schools.com/sql/sql_groupby.asp">Grupeerimine</a>
<ul>
<li><strong>SELECT</strong> tulp1, tulp2 <strong>FROM</strong> andmestik <strong>GROUP BY</strong> tulp1;
<ul>
<li><em>vali andmestikust tulbad ‘tulp1’ ja ‘tulp2’ ning grupeeri andmed ‘tulp1’ unikaalsete väärtuste järgi</em><br />
</li>
</ul></li>
<li><strong>SELECT</strong> tulp1, tulp2 <strong>FROM</strong> andmestik <strong>WHERE</strong> tulp1 = ‘Mingi väärtus’ <strong>GROUP BY</strong> tulp2;
<ul>
<li><em>vali andmestikust tulbad ‘tulp1’ ja ‘tulp2’ ning ainult read, kus tulbal ‘tulp1’ on väärtused ‘Mingi väärtus’, grupeeri saadud tabel ‘tulp2’ unikaalsete väärtuste järgi</em></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="harjutus-päringutega" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Harjutus päringutega<a href="avaldised.html#harjutus-päringutega" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>SQL-i päringuid saab QGISis teha nt <strong><code>DB Manager</code></strong> tööriistaga (ülamenüüs <code>Database → DB Manager</code>). Mõned SQL-i funktsioonid (nt <code>UPDATE</code>) töötavad ainult “päris” andmebaasiformaatidega, nt <em>GeoPackage</em>’i failidega (kui need on ka <em>GeoPackage</em>’ina sisse loetud, mitte lihtsalt vektorfailidena).</p>
<p>DB Manageris valime praegu virtuaalsete kihtide alt kihelkondade polügoonide kihi, valime ülevalt menüüst <strong><code>SQL Window</code></strong> <img src="imgs/10_sqlwindow.png" /> ja kirjutame kasti päringu (asendame punktiirid sobivate väärtustega).</p>
<ol style="list-style-type: decimal">
<li>Valime kihelkondade andmestikust ainult eestikeelse murrete nimede tulba ja salvestame selle eraldi kihil.
<ul>
<li><code>SELECT ... FROM ...;</code><br />
</li>
<li>Kui tahame uuele kihile saada kaasa ka polügoonide andmeid, peame valima “eraldi tulbana” ka kihi geomeetria, mis on enamasti kujul <code>geometry</code>: <code>SELECT ..., geometry FROM ...;</code><br />
</li>
<li>Vajutame <em>Execute</em>, teeme linnukese <em>Load as new layer</em> ette ja vajutame <em>Load</em>.<br />
</li>
</ul></li>
<li>Valime kihelkondade andmestikust kõik tulbad, aga ainult need Võru murde kihelkondade read, kus kihelkonna pindala on suurem kui kõikide eesti kihelkondade keskmine pindala.
<ul>
<li><code>SELECT ... FROM ... WHERE ... = '...' AND ... &gt; (SELECT AVG(...) FROM ...);</code><br />
</li>
</ul></li>
<li>Leiame murdealade kogupindalad.
<ul>
<li><code>SELECT ..., SUM(...) AS pindala FROM ... GROUP BY ...;</code></li>
</ul></li>
</ol>
</div>
<div id="ülesanded" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Ülesanded<a href="avaldised.html#ülesanded" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="kontrollikihelkondi" class="section level3 hasAnchor" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Ülesanne 1: “ei ole”/“pole” suhtelised sagedused murdekorpuses<a href="avaldised.html#kontrollikihelkondi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Värvime kihelkondade polügoonid selle põhjal, kui palju neis kasutatakse <strong>murdekorpuse</strong> (!) andmete põhjal protsentuaalselt eituse varianti <em>ei ole</em> (vs. <em>pole</em>). Need suhtelised sagedused on tabelis <strong><code>eiole_pole_mk_props.csv</code></strong>, aga selle tabeliga ei ole seotud mingeid koordinaate. Peame niisiis <strong>ühendama</strong> tabeli mingi tunnuse alusel (nt kihelkondade nimede järgi) olemasolevate ruumiandmetega.</p>
<ul>
<li>Teeme esmalt <strong>virtuaalse koopia</strong> kihelkondade kihist (nimetame selle nt <strong><code>kihelkonnad2</code></strong>). Nõnda ei mõjuta see, mida edasi teeme, meie algandmestikku. Kui muudaksime otse kihelkondade kihti, salvestaksime originaalandmed üle. Koopia tegemiseks on palju viise, ent harjutamise mõttes kasutame selleks siin SQLi päringut.
<ul>
<li><strong><code>Layer → Create Layer → New Virtual Layer</code></strong>: nimetame kihi nimega <code>kihelkonnad2</code>, <code>Query</code> väljale kirjutame <strong><code>SELECT * FROM kihelkonnad</code></strong> ja vajutame <code>Add</code>;<br />
</li>
</ul></li>
<li><strong>Ühendame</strong> andmestiku <code>eiole_pole_mk_props</code> kihiga <code>kihelkonnad2</code>. Esmalt kontrollime, kas ühendamine võiks üldse korralikult õnnestuda, st kas mõlemas kihis viidatakse samadele kihelkondadele ühtmoodi. Selleks, et leida kihelkonnad/murrakud, mis on kahele kihile ühised, saab kasutada SQLi päringut <strong><code>SELECT Murrak FROM eiole_pole_mk_props INTERSECT SELECT Parish_id FROM kihelkonnad2;</code></strong>. Selleks, et leida aga kihelkonnad, mida teises andmestikus ei ole, võib kasutada päringut <strong><code>SELECT Murrak FROM eiole_pole_mk_props EXCEPT SELECT Parish_id FROM kihelkonnad2;</code></strong>. Kasutame päringu tegemiseks <code>DB Manageri</code>. Kui oleme vajutanud nupul <code>Execute</code>, väljastatakse alumisse aknasse need murrakute nimed, mis on küll andmestikus <code>eiole_pole_mk_props</code> tulbas <code>Murrak</code>, ent mida ei ole sellisel kujul andmestikus <code>kihelkonnad2</code> tulbas <code>Parish_id</code>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions8"></span>
<img src="imgs/10_ylesanne1.png" alt="Vigase kihelkonnanime tuvastamine" width="70%" />
<p class="caption">
Joonis 7.6: Vigase kihelkonnanime tuvastamine
</p>
</div>
<ul>
<li>Parandame CSV-kihis selle murraku nime, mis ei sisaldu kihelkondade <em>shapefile</em>’is. Kuna CSV-faili atribuute muuta ei saa, lisame kihile uue virtuaalse atribuudi <strong><code>Murrak2</code></strong>, kus asendame vigase nime õigega (kasutame <code>if</code>-tingimuslauset).</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions10"></span>
<img src="imgs/10_newfield.png" alt="Uue virtuaalse atribuudi loomine" width="70%" />
<p class="caption">
Joonis 7.7: Uue virtuaalse atribuudi loomine
</p>
</div>
<ul>
<li>Lisame kihile <code>kihelkonnad2</code> <em>ei ole</em>/<em>pole</em> kasutamise sagedusandmed. Kasutame andmestike <strong>ühendamiseks</strong> vastavalt <code>Parish_id</code> ja <code>Murrak2</code> tulpasid.
<ul>
<li>Teine moodus kihte ühe tunnuse alusel ühendada on nii, kui valime <code>Processing → Toolbox → Vector general → Join attributes by field value</code>. Erinevus tavalise <code>Join</code>-funktsiooniga on selles, et tekib uus kiht (vaikimisi nimega <code>Joined layer</code>).<br />
</li>
</ul></li>
<li>Värvime <em>ei ole</em>/<em>pole</em> proportsioonide infoga täiendatud kihi <code>kihelkonnad2</code> polügoonid vastavalt <em>ei ole</em> suhtelisele sagedusele kihelkonnas/murrakus nii, et <strong>viirutatult oleksid märgitud ka kihelkonnad, millest murdekorpuse sagedusinfot ei ole</strong> (vaikimisi klassifitseerides neid kihelkondi enam üldse ei näidataks). Selleks peab kasutama <strong>reeglipõhist sümboloogiat</strong>. Nendele kihelkondadele, kust infot on, teeme 5 sagedusklassi (0-0.2, 0.2-0.4, 0.4-0.6, 0.6-0.8 ja 0.8-1.0).</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions12"></span>
<img src="imgs/10_eioleprops.gif" alt="Reeglipõhine polügoonide värvimine" width="70%" />
<p class="caption">
Joonis 7.8: Reeglipõhine polügoonide värvimine
</p>
</div>
</div>
<div id="ülesanne-2-ei-olepole-murdeatlase-levikuandmed" class="section level3 hasAnchor" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Ülesanne 2: “ei ole”/“pole” murdeatlase levikuandmed<a href="avaldised.html#ülesanne-2-ei-olepole-murdeatlase-levikuandmed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Lisame joonisele ka murdeatlase punktandmed ning eristame punktide välimuse selle järgi, kas tegemist on <em>ei ole</em> või <em>pole</em> variandiga.<br />
</li>
<li>Kuna praegu on keelendi tulbas igasuguseid variante, nt <em>põle</em>, <em>ei (äi) ole</em>, <em>ole ei (õi)</em>, <em>ei (äi, öi) pole</em>, siis peaks esmalt looma ühe binaarse (ainult kahe võimaliku väärtusega) atribuudi, kus oleksid ainult väärtused <em>ei ole</em> ja <em>pole</em>.<br />
</li>
<li>Selleks filtreerime (paremklikk → <code>Filter</code>) kihist <code>30_ei_ole</code> välja ainult need read, kus keelendi info on olemas (<code>"Keelend" IS NOT NULL</code>) ning lisame selle atribuuttabelisse <code>Field Calculator</code>’i abil uue <strong>virtuaalse</strong> atribuudi/tulba nimega <strong><code>Keelend2</code></strong>, kuhu paneme väärtuse <em>pole</em> siis, kui keelendi tulbas esineb <em>p</em>-täht, ja <em>ei ole</em> siis, kui ei esine (see tähendab, et ka nt <em>ei pole</em> klassifitseeritakse <em>pole</em>-ks). Kasutame <strong><code>if</code></strong>-tingimuslauset ja <strong><code>ILIKE</code></strong>-operaatorit: <strong><code>if("Keelend" ILIKE '%p%', 'pole', 'ei ole')</code></strong>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex5"></span>
<img src="imgs/10_keelend2.png" alt="Binaarse virtuaalse tunnuse loomine" width="70%" />
<p class="caption">
Joonis 7.9: Binaarse virtuaalse tunnuse loomine
</p>
</div>
<ul>
<li>Valime binaarsele keelendile vastava sümboli ja värvi.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressionsex6"></span>
<img src="imgs/10_eiolepoleatlas.png" alt="Korpuse ja atlase andmed eituskonstruktsioonide *ei ole* ja *pole* sagedusest ja levikust" width="70%" />
<p class="caption">
Joonis 7.10: Korpuse ja atlase andmed eituskonstruktsioonide <em>ei ole</em> ja <em>pole</em> sagedusest ja levikust
</p>
</div>
</div>
<div id="ülesanne-3-ei-olepole-selged-eelistused" class="section level3 hasAnchor" number="7.6.3">
<h3><span class="header-section-number">7.6.3</span> Ülesanne 3: “ei ole”/“pole” selged eelistused<a href="avaldised.html#ülesanne-3-ei-olepole-selged-eelistused" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Teeme kihist <code>kihelkonnad2</code> duplikaadi nimega <strong><code>kihelkonnad3</code></strong> (paremklikk → <strong><code>Duplicate Layer</code></strong> ja uuel kihil paremklikk → <strong><code>Rename Layer</code></strong>).<br />
</li>
<li>Kasutades <strong>reeglipõhist</strong> polügoonide värvimist, kuvame kihil <code>kihelkonnad3</code> värviliselt ainult kihelkonnad, mille puhul <em>ei ole</em> ja <em>pole</em> <strong>proportsioonide absoluuterinevus</strong> on vähemalt 0,5. Ülejäänud polügoonidele (sh puuduvatele väärtustele) määrame halli värvi.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions13"></span>
<img src="imgs/10_suurederinevused.gif" alt="Suured sageduserinevused" width="80%" />
<p class="caption">
Joonis 7.11: Suured sageduserinevused
</p>
</div>
<ul>
<li>Nüüd muudame reegleid nii, et kihelkonnad, mille puhul <em>ei_ole</em> ja <em>pole</em> suur vahe on negatiivne (-0,5 või vähem), on punased, ja need, mille vahe on positiivne (0,5 või suurem), on sinised.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions14"></span>
<img src="imgs/10_suuredvaiksederinevused.gif" alt="*ei ole* ja *pole* konstruktsioonide eelistused murrakutes" width="70%" />
<p class="caption">
Joonis 7.12: <em>ei ole</em> ja <em>pole</em> konstruktsioonide eelistused murrakutes
</p>
</div>
</div>
<div id="ülesanne-4-tekstiatribuutide-muutmine" class="section level3 hasAnchor" number="7.6.4">
<h3><span class="header-section-number">7.6.4</span> Ülesanne 4: tekstiatribuutide muutmine<a href="avaldised.html#ülesanne-4-tekstiatribuutide-muutmine" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Muudame kihil <code>kihelkonnad3</code> eestikeelsete murrete nimetustes kõik Setu murded Seto murreteks, kasutades <strong><code>if</code>-tingimuslauset</strong>. Salvestame uued nimed uude tulpa <strong><code>Murre</code></strong>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions16"></span>
<img src="imgs/10_setuseto.png" alt="Setu murre Seto murdeks" width="60%" />
<p class="caption">
Joonis 7.13: Setu murre Seto murdeks
</p>
</div>
<ul>
<li>Muudame nüüd kihil <code>kihelkonnad3</code> ingliskeelsete murrete nimetustes kõik Setu murded Seto murreteks, kasutades <strong><code>CASE</code>-tingimuslauset</strong>. Salvestame uued nimed uude tulpa <strong><code>Dialect</code></strong>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions17"></span>
<img src="imgs/10_setuseto_eng.png" alt="Setu murre Seto murdeks (2)" width="60%" />
<p class="caption">
Joonis 7.14: Setu murre Seto murdeks (2)
</p>
</div>
<ul>
<li>Leiame kihil <code>kihelkonnad3</code> kõik kihelkondade nimed, mille saksakeelne nimi algab lühendiga <em>St.</em> ning muudame lühendi <em>Sankt</em>’iks, kasutades regulaaravaldist. Salvestame uued nimed uude tulpa nimega <strong><code>Saksakeelne_nimi</code></strong>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:expressions18"></span>
<img src="imgs/10_saksakeelnenimi.png" alt="*St.* muutmine *Sankt*'iks" width="70%" />
<p class="caption">
Joonis 7.15: <em>St.</em> muutmine <em>Sankt</em>’iks
</p>
</div>
<ul>
<li>Leiame kõik kihelkonnad, mille nimed lõppevad <em>la</em>-ga (nt <em>Ambla</em>) ja asendame need lõpud uues tulbas nimega “Kihelkond” <em>LA</em>-ga (<em>AmbLA</em>), kasutades <strong>regulaaravaldist</strong>: <strong><code>regexp_replace("Name", '(.*)la', '\\1LA')</code></strong>. Siin ütleme, et
<ul>
<li>tulba <code>Name</code> kõikides sõnades,<br />
</li>
<li>mis algavad mis iganes sümboliga (nt tähega, numbriga, kirjavahemärgiga, tühikuga) <code>.</code>,</li>
<li>mida esineb ükskõik mitu korda <code>*</code> (nt <em>Kei</em>, <em>Viga</em>, <em>Amb</em>, <em>Halja</em>)<br />
</li>
<li>ja kus sellele millele iganes mitu iganes korda järgneb järjend <em>la</em>,<br />
</li>
<li>jäta alles see esimene <code>\\1</code> (ja siin ainus) grupeeritud osa <code>(.*)</code> enne <em>la</em>-d,<br />
</li>
<li>aga grupeeritud osa lõpus asenda järjend <em>la</em> järjendiga <em>LA</em>.</li>
</ul></li>
</ul>
<p>Põhimõtteliselt võiksime kasutada DB Manageris ka <em>UPDATE CASE WHERE</em> lauseid, ent kuna ükski meie kihtidest ei ole QGISi jaoks päris andmebaas, siis saame teha DB Manageris ainult päringuid, aga tabelit muuta ei saa. Saame aga eksportida mõne <em>virtuaalse kihi</em> näiteks GeoPackage-formaadis failina ning seda uuesti sisse lugedes saame andmestikku DB Manageris ka SQL-lausete abil muuta.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="georefereerimine.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="kirjandus.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
